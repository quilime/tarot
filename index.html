<html>
<head>
  <title>tarot</title>
  <script src="tarot.js"></script>
</head>
<body>

Birthday

<select id="BirthYear">
  <option disabled selected="selected">Year</option>
</select>

<select id="M">
<option disabled selected="selected">Month</option>
</select>

<select id="D">
<option disabled selected="selected">Day</option>
</select>

Until

<select id="EndYear">
  <option disabled selected="selected">Year</option>
</select>

<button onClick="calc();">Calc</button><br /><br />
<textarea id="console" style="width:600px;height:400px;"></textarea><br />
<a href="https://github.com/quilime/tarot">source code</a>

<script>

  const $ = (id) => {
    return document.getElementById(id);
  }

  const create = (el) => {
    return document.createElement(el);
  }

  const calc = () => {
    const _BIRTHYEAR = $("BirthYear").value;
    const _M = $("M").value;
    const _D = $("D").value;
    const _ENDYEAR = $("EndYear").value;
    $("console").value = getTSV(getChart(_BIRTHYEAR, _M, _D, _ENDYEAR));
  }

  window.onload = (event) => {
    const now = new Date();
    const nowY = now.getFullYear();

    const bYSel = $("BirthYear");
    for (let y = nowY-120; y <= nowY; y++) {
      const o = create("option");
      o.text = y;
      o.value = y;
      bYSel.add(o);
    }

    const eYSel = $("EndYear");
    for (let y = nowY-120; y <= nowY+100; y++) {
      const o = create("option");
      o.text = y;
      o.value = y;
      eYSel.add(o);
    }

    const mSel = $("M");
    for (let m = 1; m <= 12; m++) {
      const o = create("option");
      o.text = m;
      o.value = m;
      mSel.add(o);
    }

    const dSel = $("D");
    for (let m = 1; m <= 31; m++) {
      const o = create("option");
      o.text = m;
      o.value = m;
      dSel.add(o);
    }

    bYSel.value = 2000;
    mSel.value = 1;
    dSel.value = 1;
    eYSel.value = nowY;
  };

</script>
